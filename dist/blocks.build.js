!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(1)},function(e,t,n){"use strict";var r=n(2),o=n(4),l=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(_n=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=wp.element,i=a.Fragment,u=a.useEffect,c=a.useState,__=wp.i18n.__,p=wp.components,s=p.Button,d=p.Placeholder;(0,wp.blocks.registerBlockType)("turbovideo-block/turbovideo-player",{title:__("Turbo Video"),icon:"video-alt3",category:"media",attributes:{clientId:{type:"string"},poster:{type:"string",default:""},controls:{type:"object",default:{progress:!0,"play-large":!0,restart:!1,rewind:!0,play:!0,"fast-forward":!0,"current-time":!0,duration:!0,mute:!0,volume:!0,pip:!0,airplay:!0,settings:!0,download:!1,fullscreen:!0}},width:{type:"object",default:{number:100,unit:"%"}},radius:{type:"object",default:{number:0,unit:"px"}},autoplay:{type:"boolean",default:!1},muted:{type:"boolean",default:!1},download:{type:"boolean",default:!1},source:{type:"string"},videoURL:{type:"string"}},edit:function(e){var t=e.attributes,n=e.setAttributes,a=e.isSelected,p=e.clientId,m=t.source,f=t.poster,w=t.controls,v=(t.repeat,t.muted),y=(t.popup,t.autoHideControl,t.width,t.autoplay),b=t.download,h=t.videoURL,g=c(null),E=l(g,2),C=E[0],k=E[1],x=c(""),L=l(x,2),R=L[0],U=L[1],P={source:m,poster:f,setSource:!1},T={controls:Object.keys(w).filter(function(e){return w[e]}),clickToPlay:!1,autoplay:y,muted:v,download:b};return u(function(){if(h){var e=document.createElement("video"),t=(document.querySelector("#block-"+p+" .h5vp_player"),document.querySelector("#block-"+p+" .h5vp_player .videoWrapper"));t.innerHTML="",e.setAttribute("id","player"),e.setAttribute("data-poster",f),t.appendChild(e);var n=document.getElementById("player"),r=new Plyr(n,T);k(r),v?(r.muted=!0,r.volume=0):(r.muted=!1,r.volume=1),b&&(r.download=b),window.player=r,P.setSource&&(r.source={type:"video",title:"Title",poster:P.poster}),window.innerWidth<992&&(r.on("enterfullscreen",function(){screen.orientation&&screen.orientation.lock("landscape")}),r.on("exitfullscreen",function(){screen.orientation&&screen.orientation.lock("portrait")})),r.on("enterfullscreen",function(){t.classList.add("fullscreen")}),r.on("exitfullscreen",function(){t.classList.remove("fullscreen")}),MEPlayer.init({});var o=new MEPlayer(n);if(null===/^turbo\:\/\/\w+\.\w+\/\w+/gm.exec(h))return;return o.load(h,{}),function(){o.destroy()}}},[h,f]),u(function(){a&&wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/block")},[a]),u(function(){C&&(C.muted=v,C.volume=v?0:1)},[v]),wp.element.createElement(i,null,wp.element.createElement(o.a,{attributes:t,setAttributes:n}),h?wp.element.createElement(i,null,wp.element.createElement(r.a,{classes:"h5vp_player",attributes:t})):wp.element.createElement(i,null,wp.element.createElement(d,{icon:wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},wp.element.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),wp.element.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),instructions:__("Upload a video or paste/write video url to get started.","h5vp"),label:__("Turbo Video ","h5vp")},wp.element.createElement("div",{className:"h5vpUrlInput"},wp.element.createElement("input",{type:"url","aria-label":__("URL","h5vp"),placeholder:__("Paste or type a video URL","h5vp"),onChange:function(e){return U(e.target.value)},value:R}),wp.element.createElement(s,{label:__("Apply","h5vp"),type:"submit",onClick:function(e){e.preventDefault(),n({videoURL:R}),U("")},isPrimary:!0},"Apply")))))},save:function(){return null}})},function(e,t,n){"use strict";var r=n(3),o=(n.n(r),function(e){var t=e.classes,n=void 0===t?"":t,o=e.attributes,l=o.width,a=o.radius,i=(o.muted,o.autoplay,0===l.number?"100%":l.number+"%"),u=a.number+a.unit;return Object(r.createElement)("div",{className:n,id:"h5vp_player","data-settings":JSON.stringify({}),style:{width:i,borderRadius:u,overflow:"hidden",margin:"0 auto"}},Object(r.createElement)("div",{className:"videoWrapper"}))});t.a=o},function(e,t){e.exports=React},function(e,t,n){"use strict";var __=wp.i18n.__,r=wp.editor,o=r.BlockControls,l=r.InspectorControls,a=wp.components,i=a.PanelBody,u=a.TextControl,c=a.Dropdown,p=a.RangeControl,s=a.ToggleControl,d=a.Toolbar,m=a.IconButton,f=function(e){var t=e.attributes,n=e.setAttributes,r=t.width,a=t.autoplay,f=t.muted,w=(t.source,t.poster),v=t.videoURL,y=t.download;return wp.element.createElement("div",null,wp.element.createElement(l,null,wp.element.createElement(i,{title:__("Video Settings")},wp.element.createElement(u,{label:"Video URL",value:v,onChange:function(e){return n({videoURL:e})}}),wp.element.createElement(u,{label:"Cover URL",value:w,onChange:function(e){return n({poster:e})}}),wp.element.createElement(p,{label:"Width",value:r.number,onChange:function(e){n({width:{number:e}})},beforeIcon:"%",min:0,max:100,allowReset:!0}),wp.element.createElement(s,{label:"Download",checked:y,onChange:function(){return n({download:!y})}}),wp.element.createElement(s,{label:"Auto Play",checked:a,onChange:function(){return n({autoplay:!a})}}),wp.element.createElement(s,{label:"Muted",checked:f,onChange:function(){return n({muted:!f})}}))),wp.element.createElement(o,null,wp.element.createElement(d,{label:"Options"},wp.element.createElement(c,{renderToggle:function(e){var t=e.isOpen,n=e.onToggle;return wp.element.createElement(m,{icon:"edit",label:"Change URL",onClick:n,"aria-expanded":t})},renderContent:function(){return wp.element.createElement("div",{style:{"min-width":"200px"}},wp.element.createElement(u,{label:"Video URL",value:v,onChange:function(e){return n({videoURL:e})}}),wp.element.createElement(u,{label:"Cover URL",value:w,onChange:function(e){return n({poster:e})}}))}}))))};t.a=f}]);